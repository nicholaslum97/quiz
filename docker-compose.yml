version: '3.9'
services:
  apache:
    image: httpd:latest
    container_name: my-apache-app
    ports:
    - '80:80'
    volumes:
    - ./website:/usr/local/apache2/app
    
  jenkins:
    container_name: jenkins
    build: ./jenkins
    ports:
      - '8080:8080'
      - '443:8443'
      - '50000:50000'
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./jenkins_home:/var/jenkins_home  
      
    git-server:
      build:
        dockerfile: gitserver.Dockerfile
        context: .
      restart: always
      ports:
        - "3000:3000"
      volumes:
        - ./repos:/var/www/git